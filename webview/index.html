<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div>
      UserAgent:
      <div id="ua"></div>
    </div>
    <div>
      standalone:
      <div id="standalone"></div>
    </div>
    <div>
      external:
      <div id="external"></div>
    </div>
    <div>
      result:
      <div id="result"></div>
    </div>

    <div><a href="./" target="_blank" rel="noopener">target blank</a></div>
  </body>

  <script>
    const standalone = window.navigator.standalone,
      userAgent = window.navigator.userAgent.toLowerCase(),
      safari = /safari/.test(userAgent),
      ios = /iphone|ipod|ipad/.test(userAgent);

    let res = "";

    if (ios) {
      if (!standalone && safari) {
        //browser
        res = "browser";
      } else if (standalone && !safari) {
        //standalone
        res = "standalone";
      } else if (!standalone && !safari) {
        //uiwebview
        res = "uiwebview";
      }
    } else {
      //not iOS
      res = "not iOS";
    }

    const $ua = document.getElementById("ua");
    const $standalone = document.getElementById("standalone");
    const $external = document.getElementById("external");
    const $result = document.getElementById("result");

    $ua.textContent = window.navigator.userAgent.toLowerCase();
    $standalone.textContent = standalone;
    $external.textContent = window.external;
    $result.textContent = res;
  </script>
</html>
